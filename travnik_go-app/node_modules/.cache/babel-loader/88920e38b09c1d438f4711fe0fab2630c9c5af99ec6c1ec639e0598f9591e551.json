{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nedim\\\\Desktop\\\\TravnikGO projekat\\\\TravnikGO\\\\travnik_go-app\\\\src\\\\pages\\\\Admin\\\\dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport axios from 'axios';\nimport Chart from 'chart.js/auto';\nimport '../../pages/admin/Admin.css';\nimport { Card, Typography, CardContent, styled } from \"@mui/material\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AdminDashboard() {\n  _s();\n  const [rentersCount, setRentersCount] = useState(0);\n  const [usersCount, setUsersCount] = useState(0);\n  const [rentalsData, setRentalsData] = useState(0);\n\n  // Ref to chart canvas and chart instance\n  const pieChartRef = useRef(null);\n  const pieChartInstanceRef = useRef(null);\n  const barChartRef = useRef(null);\n  const barChartInstanceRef = useRef(null);\n\n  /*useEffect(() => {\r\n      async function fetchData() {\r\n          try {\r\n              const rentersResponse = await axios.get(\r\n                  'http://127.0.0.1:8000/admin/getRentersCount/'\r\n              );\r\n              setRentersCount(rentersResponse.data.broj_osoba);\r\n                const usersResponse = await axios.get(\r\n                  'http://127.0.0.1:8000/admin/getUsersCount/'\r\n              );\r\n              setUsersCount(usersResponse.data.broj_osoba);\r\n                const rentalsResponse = await axios.get('http://127.0.0.1:8000/admin/getRentalsData/');\r\n              setRentalsData(rentalsResponse.data.rentals_per_month);\r\n              console.log(\"rentals data: \", rentalsData)\r\n            } catch (error) {\r\n              console.error('Error fetching data:', error);\r\n          }\r\n      }\r\n        fetchData();\r\n  }, []);*/\n\n  useEffect(() => {\n    if (pieChartRef.current && rentersCount !== 0 && usersCount !== 0) {\n      // Destroy existing chart instance\n      if (pieChartInstanceRef.current) {\n        pieChartInstanceRef.current.destroy();\n      }\n\n      // Create new chart instance\n      pieChartInstanceRef.current = new Chart(pieChartRef.current, {\n        type: 'pie',\n        data: {\n          labels: ['Renters', 'Users'],\n          datasets: [{\n            label: 'Number of renters and users',\n            data: [rentersCount, usersCount],\n            backgroundColor: ['#FF6384', '#36A2EB']\n          }]\n        }\n      });\n    }\n    if (barChartRef.current && rentalsData.length > 0) {\n      // Destroy existing chart instance\n      if (barChartInstanceRef.current) {\n        barChartInstanceRef.current.destroy();\n      }\n      const barChartData = {\n        labels: ['January', 'February', 'March', 'April', 'May', 'June'],\n        datasets: [{\n          label: 'Bookings',\n          data: rentalsData,\n          backgroundColor: '#36A2EB'\n        }]\n      };\n\n      // Create new chart instance\n      barChartInstanceRef.current = new Chart(barChartRef.current, {\n        type: 'bar',\n        data: barChartData,\n        options: {\n          scales: {\n            yAxes: [{\n              ticks: {\n                beginAtZero: true\n              }\n            }]\n          }\n        }\n      });\n    }\n  }, [rentersCount, usersCount, rentalsData]);\n  const CardContainer = styled(\"div\")({\n    display: \"flex\",\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-center\",\n    gap: \"1rem\"\n  });\n  const CardWrapper = styled(Card)({\n    width: \"100%\",\n    maxWidth: \"25rem\",\n    boxShadow: \"rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px\"\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-data\",\n    children: /*#__PURE__*/_jsxDEV(CardContainer, {\n      className: \"analytic-cards\",\n      children: [/*#__PURE__*/_jsxDEV(CardWrapper, {\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            gutterBottom: true,\n            variant: \"h5\",\n            component: \"div\",\n            children: \"Bookings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"text.secondary\",\n            children: \"Number of bookings in recent 6 months.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: barChartRef,\n            id: \"barChartRef\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(CardWrapper, {\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            gutterBottom: true,\n            variant: \"h5\",\n            component: \"div\",\n            children: \"Clients\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"text.secondary\",\n            children: \"Number of clients.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: pieChartRef,\n            id: \"pieChartRef\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 9\n  }, this);\n}\n_s(AdminDashboard, \"dx0K+C5HnUz76NEdJ1Fl70HWeK0=\");\n_c = AdminDashboard;\nexport default AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["React","useEffect","useRef","useState","axios","Chart","Card","Typography","CardContent","styled","jsxDEV","_jsxDEV","AdminDashboard","_s","rentersCount","setRentersCount","usersCount","setUsersCount","rentalsData","setRentalsData","pieChartRef","pieChartInstanceRef","barChartRef","barChartInstanceRef","current","destroy","type","data","labels","datasets","label","backgroundColor","length","barChartData","options","scales","yAxes","ticks","beginAtZero","CardContainer","display","flexDirection","flexWrap","justifyContent","gap","CardWrapper","width","maxWidth","boxShadow","className","children","gutterBottom","variant","component","fileName","_jsxFileName","lineNumber","columnNumber","color","ref","id","_c","$RefreshReg$"],"sources":["C:/Users/nedim/Desktop/TravnikGO projekat/TravnikGO/travnik_go-app/src/pages/Admin/dashboard.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport axios from 'axios';\r\nimport Chart from 'chart.js/auto';\r\nimport '../../pages/admin/Admin.css';\r\nimport { Card, Typography, CardContent, styled } from \"@mui/material\";\r\n\r\nfunction AdminDashboard() {\r\n    const [rentersCount, setRentersCount] = useState(0);\r\n    const [usersCount, setUsersCount] = useState(0);\r\n    const [rentalsData, setRentalsData] = useState(0);\r\n\r\n    // Ref to chart canvas and chart instance\r\n    const pieChartRef = useRef(null);\r\n    const pieChartInstanceRef = useRef(null);\r\n\r\n    const barChartRef = useRef(null);\r\n    const barChartInstanceRef = useRef(null);\r\n\r\n    /*useEffect(() => {\r\n        async function fetchData() {\r\n            try {\r\n                const rentersResponse = await axios.get(\r\n                    'http://127.0.0.1:8000/admin/getRentersCount/'\r\n                );\r\n                setRentersCount(rentersResponse.data.broj_osoba);\r\n\r\n                const usersResponse = await axios.get(\r\n                    'http://127.0.0.1:8000/admin/getUsersCount/'\r\n                );\r\n                setUsersCount(usersResponse.data.broj_osoba);\r\n\r\n                const rentalsResponse = await axios.get('http://127.0.0.1:8000/admin/getRentalsData/');\r\n                setRentalsData(rentalsResponse.data.rentals_per_month);\r\n                console.log(\"rentals data: \", rentalsData)\r\n\r\n            } catch (error) {\r\n                console.error('Error fetching data:', error);\r\n            }\r\n        }\r\n\r\n        fetchData();\r\n    }, []);*/\r\n\r\n    useEffect(() => {\r\n        if (pieChartRef.current && rentersCount !== 0 && usersCount !== 0) {\r\n            // Destroy existing chart instance\r\n            if (pieChartInstanceRef.current) {\r\n                pieChartInstanceRef.current.destroy();\r\n            }\r\n\r\n            // Create new chart instance\r\n            pieChartInstanceRef.current = new Chart(pieChartRef.current, {\r\n                type: 'pie',\r\n                data: {\r\n                    labels: ['Renters', 'Users'],\r\n                    datasets: [\r\n                        {\r\n                            label: 'Number of renters and users',\r\n                            data: [rentersCount, usersCount],\r\n                            backgroundColor: ['#FF6384', '#36A2EB'],\r\n                        },\r\n                    ],\r\n                },\r\n            });\r\n        }\r\n\r\n        if (barChartRef.current && rentalsData.length > 0) {\r\n            // Destroy existing chart instance\r\n            if (barChartInstanceRef.current) {\r\n                barChartInstanceRef.current.destroy();\r\n            }\r\n            const barChartData = {\r\n                labels: ['January', 'February', 'March', 'April', 'May', 'June'],\r\n                datasets: [\r\n                    {\r\n                        label: 'Bookings',\r\n                        data: rentalsData,\r\n                        backgroundColor: '#36A2EB',\r\n                    },\r\n                ],\r\n            };\r\n\r\n            // Create new chart instance\r\n            barChartInstanceRef.current = new Chart(barChartRef.current, {\r\n                type: 'bar',\r\n                data: barChartData,\r\n                options: {\r\n                    scales: {\r\n                        yAxes: [\r\n                            {\r\n                                ticks: {\r\n                                    beginAtZero: true,\r\n                                },\r\n                            },\r\n                        ],\r\n                    },\r\n                },\r\n            });\r\n        }\r\n    }, [rentersCount, usersCount, rentalsData]);\r\n\r\n    const CardContainer = styled(\"div\")({\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"space-center\",\r\n        gap: \"1rem\",\r\n    });\r\n\r\n    const CardWrapper = styled(Card)({\r\n        width: \"100%\",\r\n        maxWidth: \"25rem\",\r\n        boxShadow: \"rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px\",\r\n    });\r\n\r\n    return (\r\n        <div className=\"dashboard-data\">\r\n            <CardContainer className=\"analytic-cards\">\r\n                <CardWrapper>\r\n                    <CardContent>\r\n                        <Typography gutterBottom variant=\"h5\" component=\"div\">\r\n                            Bookings\r\n                        </Typography>\r\n                        <Typography variant=\"body2\" color=\"text.secondary\">\r\n                            Number of bookings in recent 6 months.\r\n                        </Typography>\r\n                        <canvas ref={barChartRef} id=\"barChartRef\" />\r\n                    </CardContent>\r\n                </CardWrapper>\r\n                <CardWrapper>\r\n                    <CardContent>\r\n                        <Typography gutterBottom variant=\"h5\" component=\"div\">\r\n                            Clients\r\n                        </Typography>\r\n                        <Typography variant=\"body2\" color=\"text.secondary\">\r\n                            Number of clients.\r\n                        </Typography>\r\n                        <canvas ref={pieChartRef} id=\"pieChartRef\" />\r\n                    </CardContent>\r\n                </CardWrapper>\r\n            </CardContainer>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AdminDashboard;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}